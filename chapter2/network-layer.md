# 네트워크 계층
## 데이터 링크 계층의 한계

1. 물리 계층과 데이터 링크 계층만으로 다른 네트워크까지의 도달 경로를 파악하기 어렵다.
물리와 데이터 링크 계층은 기본적으로 LAN을 다루는 계층이다
하지만 LAN에 속한 호스트끼리만 통신하지는 않는다
지구 반대편에 있는 사용자가 정보를 주고 받는다면, 해당 패킷은 서로에게 도달하기까지 수많은 네트워크 장비를 거친다
이때 최적의 경로로 빠르게 패킷의 이동 경로를 결정하는 것을 '라우팅'(routing)이라한다.

라우팅을 수행하는 네트워크 장비로는 '라우터'가 있다.

2. MAC 주소만으로는 모든 네트워크에 속한 호스트의 위치를 특정하기 어렵다.
네트워크에서도 MAC주소와 IP주소를 함께 사용하고, 기본적으로 IP 주소를 우선적으로 활용하는데
MAC 주소를 물리 주소라고도 부르고, IP 주소는 논리 주소라고도 부른다.

일반적으로 MAC 주소는 NIC 마다 할당되는 고정 주소이지만, IP 주소는 호스트에 직접 할당이 가능하며
DHCP(Dynamic Host Configuration Protocol) 라는 특정 프로토콜을 통해 자동으로 할당받거나 사용자가 직접 할당할 수도 있다.

또한 한 호스트가 복수의 IP 주소를 가질수도있다.

> 💡 물리계층과 데이터 링크 계층만으로 네트워크 간의 통신이 어렵고, 네트워크 계층이 다른 네트워크와 통신을 가능케 한다, 이는 IP 주소를 이용해 수신지 주소를 설정하거나, 해당 수신지까지의 최적의 경로를 결정하는 라우팅이 네트워크 계층에서 이루어지 때문이다.

## 인터넷 프로토콜, Internet Protocol
IP는 두 가지의 버전이 있는데 IPv4와 IPv6이다.

### IP 주소 형태
IP주소는 4바이트(32bit)로 주소를 표현할 수 있고, 숫자당 8비트로 표현되기에 0~255 범위안에 있는 네 개의 10진수로 표기된다.
각 10진수는 "."으로 구분되며 점으로 구분된 8비트를 옥텟(octet)이라 한다.

```
192, 168, 1,1
```
각각은 8비트로 표현된 옥텟이다.

### IP 기능

IP 주소 기능, IP addressing
IP 주소를 바탕으로 송수신 대상을 지정하는 것을 의미하며,
IP 단편화(IP fragmentation)는 전송하고자 하는 패킷의 크기가
MTU라는 최대 전송 단위보다 클 경우, 이를 MTU 크기 이하의 복수의 패킷으로 나누는것을 의미한다.

```
💡 MTU, Maximum Transmission Unit 란 한번에 전송 가능한 IP 패킷의 최대 크기를 의미한다
IP 패킷의 헤더도 MTU 크기에 포함되며 일반적으로 MTU 크기는 1500 바이트이며, MTU 크기 이하로 나누어진 패킷은 수신지에 도착해 재조합된다.

```

## IPv4
![IPv4payload](http://ktword.co.kr/img_data/1859_1.jpg)

1. 식별자

2. 플래그

3. 단편화 오프셋

4. TTL

5. 프로토콜

6. 송신지IP주소

7. 수신지IP주소

