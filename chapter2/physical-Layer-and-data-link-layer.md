# 이더넷
현대 LAN, 특히 유선 LAN 환경에서 가장 대중적으로 사용되는 기술
컴퓨터끼리 정보를 주고 받으려면 가장 먼저 '케이블'같은 통신 매체가 필요하다
또한 그 통신 매체를 통해 정보를 송수신하는 방법이 정해져있어야한다

그것이 이더넷이며 다양한 통신 매체의 규격들과 송수신되는 프레임의 형태, 프레임을 주고받는 방법등이 정의된 네트워크 기술

전기전자공학자협회라는 국제 조직은 이더넷 관련 기술을 IEEE 802.3이라 표준화했다.

## 통신 매체 표기 형태

1. 전송 속도
10 - 10Mbps
100 - 100Mbps
1000 - 1Mbps(1Gbps)
2.5 - 2Gbps

2. BASE
베이스는 베이스밴드의 약자로 변조타입을 의미한다.

변조 타입이란?
비트 신호로 변환된 데이터를 통신 매체로 전송하는 방법을 의미한다.

3. 추가 특성, Additional distinction
특성의 종류는 다양하며
10BASE-2, 10BASE-5 와 같이 전송 가능한 최대 거리가 명시되기도 하며, 데이터가비트 신호로 변환되는 방식을 의미하는 '물리 계층 인코딩'방식이 명시되기도 하고
비트 신호를 옮길 수 있는 전송로 수를 의미하는 레인 수가 명시되기도 한다.

```
1000BASE-Cx <- 물리 계층에서의 인코딩 방식
1000BASE-Tx
1000BASE-Sx
25GBASE-LR
100GBASE-LR4 <- 비트를 전송할 전송로 레인 수
100GBASE-SR4
```

### 통신 매체 종류
C - 동축 케이블
T - 트위스티드 페어 케이블
S - 단파장 광섬유 케이블
L - 장파장 광섬유 케이블

## 이더넷 프레임
데이터 링크 계층의 이더넷 프레임이란?

이더넷 프레임은 상위 계층으로부터 받아들인 정보에 헤더와 트레일러를 추가하는 캡슐화 과정을 통해 만들어진다.
수신자 입장에서는 프레임의 헤더와 트레일러를 제거한 뒤 상위 계층으로 올려보내는 역캡슐화 과정을 거친다.

이더넷 프레임의 헤더는 기본적으로 프리앰블, 수신지 MAC 주소, 송신지 MAC 주소, 타입/길이로 구성되고, 페이로드는 데이터, 트레일러는 FCS로 구성한다.

### 프리앰블, preamble
이더넷 프레임의 시작을 알리는 8 바이트(64bit) 크기의 정보이다
프리앰블의 첫 7바이트는 10101010 값을 가지고, 마지막 바이트는 10101011 값을 가진다.

수신지는 이 프리앰블을 통해 이더넷 프레임이 오고있음을 알아차린다.
즉, 프리앰블은 송수신지 간의 동기화를 위해 사용되는 정보이다

### 수신지 MAC 주소와 송신지 MAC 주소

물리적 주소라고 불리는 MAC 주소는 데이터 링크 계층의 핵심이다.

MAC 주소는 네트워크 인터페이스마다 6바이트(48bit) 길이의 주소로 LAN 내의 수신지와 송신지를 특정할 수 있다.

같은 네트워크 내에서 동일한 MAC 주소를 가진 기기들이 있다면 송신지와 수신지를 특정할 수 없기 때문에 곤란할 것이다
그래서 MAC 주소는 일반적으로 고유하고, 일반적으로 변경되지 않는 주소로써 네트워크 인터페이스마다 부여된다.

NIC, Network Interface Controller 라는 장치가 네트워크 인터페이스 역할을 담당한다.
만약 한 컴퓨터에 NIC가 여러 개라면 MAC 주소도 여러 개 있을 수 있다.


> MAC 주소는 반드시 고유하고 변경이 불가하다? 는 아니고 사설 MAC 주소는 변경이 가능한 경우도 많고 따라서 고유하지도 않다.

### 타입/길이
타입/길이 필드엔 타입 혹은 길이가 올 수도 있다.
필드에 명시된 크기가 1500(16진수05DC) 이하 일 경우 이 필드는 프레임의 크기(길이)를 나타내는데 사용하고,
1536(16진수 0600)이상일 경우 타입을 나타내는데 사용한다.

타입이란?
이더넷 프레임이 '어떤 정보를 캡슐화했는지'를 나타내는 정보이다.
이를 이더타입, ethertype이라고도 부른다.

0800 - IPv4
86DD - IPv6
0806 - ARP


### 데이터
데이터는 상위 계층에서 전달받거나 상위 계층으로 전달해야 할 내용이다
네트워크 계층의 데이터와 헤더를 합친 PDU가 이곳에 포함된다.

최대 크기는 1500 바이트로, 유의해야할 점은 반드시 일정 크기(46바이트 이상) 이여야 한다.
그 이하의 데이터라면 크기를 맞추기 위해 패딩이라는 정보가 내부에 채워진다
보통 46바이트 이상이 될때까지 0으로 채워진다.


### FCS, Frame Check Squence
FCS는 수신한 이더넷 프레임에 오류가 있는지 확인하는 필드이다
앞서 데이터 링크 계층에서 오류검출이 이루어지고 한다했는데
바로 여기서 오류 검출이 이루어진다.

이 필드에는 CRC, Cyclic Redundancy Check
즉, 순환 중복 검사라는 오류 검출용 값이 포함된다.

송신지는 프리앰블을 제외한 나머지 필드 값들을 바탕으로 CRC 값을 계산한 뒤 이 값을 FCS 필드에 명시한다.
그리고 수신지는 수신한 프레임에서 프리앰블 FCS 필드를 제외한 나머지 필드 값들을 바탕으로 CRC 값을 계산한 뒤, 이 값을 FCS 필드값과 비교한다
만약 비교값이 일치하지 않으면 프레임에 오류가 있다 판단해 프레임을 폐기한다.



